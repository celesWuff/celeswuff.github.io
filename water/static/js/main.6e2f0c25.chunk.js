(this.webpackJsonpwaterctl=this.webpackJsonpwaterctl||[]).push([[0],{56:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),o=n.n(c),i=(n(56),n(24)),s=n.n(i),l=n(39),u=n(43),d=n(25),f=n(3),h=n(93),p=n(103),b=n(35),j=n(36),g=n(95),v=n(97),w=n(102),m=n(98),x=n(45),O=n.n(x),k=n(46),y=n.n(k),S=n(101),W=n(99),C=n(104),N=n(100),A=n(5),P=Object(h.a)((function(e){return Object(p.a)({root:{flexGrow:1,paddingTop:"20px",display:"flex",alignItems:"center"},paper:{padding:e.spacing(2),margin:e.spacing(1),width:e.spacing(36)},button:{"& > *":{marginRight:e.spacing(2)}},buttonProgress:{color:b.a.A400,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},startButtonSuccess:{backgroundColor:j.a[500],"&:hover":{backgroundColor:j.a[700]}}})})),T=function(e){var t=a.a.useState(!0),n=Object(d.a)(t,2),r=n[0],c=n[1],o=function(){c(!1)};return Object(A.jsxs)(S.a,{style:{whiteSpace:"pre-wrap"},open:r,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(A.jsx)(W.a,{children:Object(A.jsx)(C.a,{id:"alert-dialog-description",children:e.errorDescription})}),Object(A.jsx)(N.a,{children:Object(A.jsx)(w.a,{onClick:o,color:"primary",autoFocus:!0,children:"\u597d"})})]})},U=function(){var e=P(),t=a.a.useState(!1),n=Object(d.a)(t,2),r=n[0],c=n[1],o=a.a.useState(!1),i=Object(d.a)(o,2),h=i[0],p=i[1],b=a.a.useState(""),j=Object(d.a)(b,2),x=j[0],k=j[1],S=a.a.useRef();a.a.useEffect((function(){return function(){clearTimeout(S.current)}}),[]);var W,C,N=Object(f.a)(Object(u.a)({},e.startButtonSuccess,h)),U=new Uint8Array([254,254,9,178,1,43,220,0,112,226,235,32,1,1,0,0,0,108,48,0]),B=new Uint8Array([254,254,9,179,0,0]),I=function(e){return console.log("Current:",e),e},D=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.bluetooth.requestDevice({filters:[{namePrefix:"Water"}],optionalServices:[61936]});case 2:return t=e.sent,I(t),e.next=6,t.gatt.connect();case 6:return W=e.sent,I(W),e.next=10,W.getPrimaryService(61936);case 10:return n=e.sent,I(n),e.next=14,n.getCharacteristic(61937);case 14:return C=e.sent,I(C),console.log("Writing: ",U),e.t0=I,e.next=20,C.writeValue(U);case 20:e.t1=e.sent,(0,e.t0)(e.t1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Writing: ",B),e.next=3,C.writeValue(B);case 3:return e.next=5,W.disconnect();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){e.toString().match(/User cancelled/)||(e.toString().match(/'requestDevice' of undefined/)?k("\u627e\u4e0d\u5230\u84dd\u7259\u786c\u4ef6\uff0c\u6216\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u3002\n\n\u8bf7\u53c2\u8003\u4e0b\u65b9\u201c\u7591\u96be\u89e3\u7b54\u201d\u3002"):k("\u672a\u77e5\u9519\u8bef\uff1a\n"+e.toString()+"\n\n\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2aBug\uff0c\u8bf7\u622a\u56fe\u5e76\u53cd\u9988\u7ed9\u5f00\u53d1\u8005\uff0c"))};return Object(A.jsxs)("div",{className:e.root,children:[x&&Object(A.jsx)(T,{errorDescription:x}),Object(A.jsxs)(g.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"center",children:[Object(A.jsx)(g.a,{item:!0,children:Object(A.jsx)(v.a,{className:e.paper,children:Object(A.jsxs)("div",{className:e.button,children:[Object(A.jsxs)(w.a,{variant:"contained",color:"primary",startIcon:Object(A.jsx)(O.a,{}),className:N,disabled:r,onClick:function(){r||(p(!1),c(!0),D().catch((function(e){return L(e)})),S.current=window.setTimeout((function(){p(!0),c(!1),k("")}),8e3))},children:["\u542f\u52a8",r&&Object(A.jsx)(m.a,{size:24,className:e.buttonProgress})]}),Object(A.jsx)(w.a,{variant:"contained",color:"primary",startIcon:Object(A.jsx)(y.a,{}),onClick:function(){E(),h&&p(!1)},children:"\u7ed3\u675f"})]})})}),Object(A.jsx)(g.a,{item:!0,children:Object(A.jsx)(v.a,{className:e.paper,children:Object(A.jsxs)("div",{className:e.button,children:[Object(A.jsx)(w.a,{variant:"outlined",href:"https://github.com/celesWuff/waterctl/blob/master/FAQ.md",children:"\u7591\u96be\u89e3\u7b54"}),Object(A.jsx)(w.a,{variant:"outlined",href:"https://github.com/celesWuff/waterctl",children:"\u6e90\u4ee3\u7801"})]})})})]})]})},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(U,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");B?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):I(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):I(t,e)}))}}()}},[[65,1,2]]]);
//# sourceMappingURL=main.6e2f0c25.chunk.js.map